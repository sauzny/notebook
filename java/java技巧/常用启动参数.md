## 常用启动参数

完整启动参数官方文档（java1.8）：

[http://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html](http://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html)

### java启动命令

- `java [options] classname [args]`

- `java [options] -jar filename [args]`

- `javaw [options] classname [args]`

- `javaw [options] -jar filename [args]`

| 参数 | 描述 |
|--------|--------|
| options | 命令选项 |
| classname | 启动类的名字 |
| filename | jar包的文件名 |
| args | 向main函数中传递的参数 |

### java启动选项 （options）共分为三类

- 1、标准选项 （-），所有的JVM实现都必须实现这些参数的功能，而且向后兼容；

- 2、非标准选项 （-X），默认jvm实现这些参数的功能，但是并不保证所有jvm实现都满足，且不保证向后兼容；

- 3、高级选项 （-XX），此类参数各个jvm实现会有所不同，将来可能会随时取消，需要慎重使用；

	- 3.1、行为参数（Behavioral Options）：用于改变jvm的一些基础行为；

	- 3.2、性能调优（Performance Tuning）：用于jvm的性能调优；

	- 3.3、调试参数（Debugging Options）：一般用于打开跟踪、打印、输出等jvm参数，用于显示jvm更加详细的信息；

### 一．标准参数，常用举例

| 参数 | 描述 |
|--------|--------|
| -verbose:class | 输出jvm载入类的相关信息，当jvm报告说找不到类或者类冲突时可此进行诊断。 |
| -verbose:gc | 输出每次GC的相关情况。 |
| -verbose:jni | 输出native方法调用的相关情况，一般用于诊断jni调用错误信息。 |

### 二．非标准参数，常用举例

| 参数 | 描述 |
|--------|--------|
| -Xms512m | 设置JVM最小可用内存为512m。设置与-Xmx相同，避免每次垃圾回收完成后JVM重新分配内存。 |
| -Xmx512m | 设置JVM最大可用内存为512M。 |
| -Xmn200m | 设置年轻代大小为200M。Sun官方推荐配置为整个堆的3/8。 |
| -Xss128k | 设置每个线程的堆栈大小。默认为1M，应设置的尽量小。（操作系统会限制一个进程内的最大线程数） |
| -Xloggc:file |  与-verbose:gc功能类似，只是将每次GC事件的相关情况记录到一个文件中 |
|  |  文件的位置最好在本地，以避免网络的潜在问题。 |
|  |  若与verbose命令同时出现在命令行中，则以-Xloggc为准。 |
| -Xprof | 跟踪正运行的程序，并将跟踪数据在标准输出输出；适合于开发环境调试。 |

### 三．高级选项，常用举例

| 参数 | 描述 |
|--------|--------|
| -XX:-UseConcMarkSweepGC | 对老年代采用并发标记交换算法进行GC，多个线程并发执行GC
|  |  一般适用于多处理器系统中，可以提高GC的效率，但算法复杂，系统消耗较大 |
| -XX:-UseParallelGC | 启用并行GC，GC运行时，对应用程序运行没有影响
|  |  GC和app两者的线程在并发执行，这样可以最大限度不影响app的运行 |
| -XX:-UseSerialGC | 启用串行GC，是jvm的默认GC方式，一般适用于小型应用和单处理器
|  |  算法比较简单，GC效率也较高，但可能会给应用带来停顿 |
| -XX:MaxPermSize=64m | 非堆内存的最大值（1.8版本中不使用此参数，使用-XX:MaxMetaspaceSize） |
| -XX:MaxMetaspaceSize=64m | 元空间占用内存的最大值（1.8版本中使用此参数） |
| -XX:NewSize=2.125m | 新生代对象生成时占用内存的默认值 |
| -XX:HeapDumpPath=./xxx.hprof | 指定导出堆信息时的路径或文件名 |
| -XX:-HeapDumpOnOutOfMemoryError | 当首次遭遇OOM时导出此时堆中相关信息 |
| -XX:-PrintConcurrentLocks | 遇到Ctrl-Break后打印并发锁的相关信息，与jstack -l功能相同 |
