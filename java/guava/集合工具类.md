# 集合工具类

## 概览

集合接口 | 属于JDK还是Guava | 对应的Guava工具类
---|---|---
Collection | JDK | Collections2：不要和java.util.Collections混淆
List | JDK | Lists
Set | JDK | Sets
SortedSet | JDK | Sets
Map | JDK | Maps
SortedMap | JDK | Maps
Queue | JDK | Queues
Multiset | Guava | Multisets
Multimap | Guava | Multimaps
BiMap | Guava | Maps
Table | Guava | Tables

## Iterables

在可能的情况下，Guava提供的工具方法更偏向于接受Iterable而不是Collection类型。在Google，对于不存放在主存的集合——比如从数据库或其他数据中心收集的结果集，因为实际上还没有攫取全部数据，这类结果集都不能支持类似size()的操作 ——通常都不会用Collection类型来表示。

因此，很多你期望的支持所有集合的操作都在Iterables类中。大多数Iterables方法有一个在Iterators类中的对应版本，用来处理Iterator。

截至Guava 1.2版本，Iterables使用FluentIterable类进行了补充，它包装了一个Iterable实例，并对许多操作提供了”fluent”（链式调用）语法。

常规方法

方法名 | 方法作用 | 说明
---|---|---
concat(Iterable<Iterable>) | 串联多个iterables的懒视图* | concat(Iterable...)
frequency(Iterable, Object) | 返回对象在iterable中出现的次数 | 与Collections.frequency (Collection,   Object)比较；Multiset
partition(Iterable, int) | 把iterable按指定大小分割，得到的子集都不能进行修改操作 | Lists.partition(List, int)；paddedPartition(Iterable, int)
getFirst(Iterable, T default) | 返回iterable的第一个元素，若iterable为空则返回默认值 | 与Iterable.iterator(). next()比较;FluentIterable.first()
getLast(Iterable) | 返回iterable的最后一个元素，若iterable为空则抛出NoSuchElementException | getLast(Iterable, T default)；FluentIterable.last()
elementsEqual(Iterable, Iterable) | 如果两个iterable中的所有元素相等且顺序一致，返回true | 与List.equals(Object)比较
unmodifiableIterable(Iterable) | 返回iterable的不可变视图 | 与Collections. unmodifiableCollection(Collection)比较
limit(Iterable, int) | 限制iterable的元素个数限制给定值 | FluentIterable.limit(int)
getOnlyElement(Iterable) | 获取iterable中唯一的元素，如果iterable为空或有多个元素，则快速失败 | getOnlyElement(Iterable, T default)

与Collection方法相似的工具方法

下面的方法中，如果传入的Iterable是一个Collection实例，则实际操作将会委托给相应的Collection接口方法。

方法 | 类似的Collection方法 | 等价的FluentIterable方法
---|---|---
addAll(Collection addTo,   Iterable toAdd) | Collection.addAll(Collection) | 
contains(Iterable, Object) | Collection.contains(Object) | FluentIterable.contains(Object)
removeAll(Iterable   removeFrom, Collection toRemove) | Collection.removeAll(Collection) | 
retainAll(Iterable   removeFrom, Collection toRetain) | Collection.retainAll(Collection) | 
size(Iterable) | Collection.size() | FluentIterable.size()
toArray(Iterable, Class) | Collection.toArray(T[]) | FluentIterable.toArray(Class)
isEmpty(Iterable) | Collection.isEmpty() | FluentIterable.isEmpty()
get(Iterable, int) | List.get(int) | FluentIterable.get(int)
toString(Iterable) | Collection.toString() | FluentIterable.toString()

## Lists

方法 | 描述
---|---
partition(List, int) | 把List按指定大小分割
reverse(List) | 返回给定List的反转视图。注: 如果List是不可变的，考虑改用ImmutableList.reverse()。

## Sets

方法 | 描述
---|---
copyInto(Set) | 拷贝进另一个可变集合
immutableCopy() | 对自己做不可变拷贝
union(Set, Set) | 并集
intersection(Set, Set) | 交集
difference(Set, Set) | 差集
symmetricDifference(Set, Set) | 互相做差集的并集
cartesianProduct(List<Set>) | 返回所有集合的笛卡儿积
powerSet(Set) | 返回给定集合的所有子集	

## Maps

方法 | 描述
---|---
uniqueIndex | 有一组对象，它们的某个属性是唯一值。此属性作为key，此对象作为value。
difference | 用来比较两个Map以获取所有不同点。

Maps.difference(Map, Map)用来比较两个Map以获取所有不同点。该方法返回MapDifference对象，可使用api：

方法 | 描述
---|---
entriesInCommon() | 两个Map中都有的映射项，包括匹配的键与值
entriesDiffering() | 键相同但是值不同值映射项
entriesOnlyOnLeft() | 键只存在于左边Map的映射项
entriesOnlyOnRight() | 键只存在于右边Map的映射项

## Multisets

方法 | 说明 | 和Collection方法的区别
---|---|---
containsOccurrences(Multiset   sup, Multiset sub) | 对任意o，如果sub.count(o)<=super.count(o)，返回true | Collection.containsAll忽略个数，而只关心sub的元素是否都在super中
removeOccurrences(Multiset   removeFrom, Multiset toRemove) | 对toRemove中的重复元素，仅在removeFrom中删除相同个数。 | Collection.removeAll移除所有出现在toRemove的元素
retainOccurrences(Multiset   removeFrom, Multiset toRetain) | 修改removeFrom，以保证任意o都符合removeFrom.count(o)<=toRetain.count(o) | Collection.retainAll保留所有出现在toRetain的元素
intersection(Multiset,   Multiset) | 返回两个multiset的交集; | 没有类似方法
copyHighestCountFirst(Multiset) | 返回Multiset的不可变拷贝，并将元素按重复出现的次数做降序排列
unmodifiableMultiset(Multiset) | 返回Multiset的只读视图
unmodifiableSortedMultiset(SortedMultiset) | 返回SortedMultiset的只读视图

## Multimaps

API

方法 | 描述
---|---
index | 集合->Multimap
forMap | map->Multimap
invertFrom | multimap->Multimap

Multimaps提供了传统的包装方法，以及让你选择Map和Collection类型以自定义Multimap实现的工具方法。

Multimap类型 | 只读包装 | 同步包装 | 自定义实现
---|---|---|---
Multimap | unmodifiableMultimap | synchronizedMultimap | newMultimap
ListMultimap | unmodifiableListMultimap | synchronizedListMultimap | newListMultimap
SetMultimap | unmodifiableSetMultimap | synchronizedSetMultimap | newSetMultimap
SortedSetMultimap | unmodifiableSortedSetMultimap | synchronizedSortedSetMultimap | newSortedSetMultimap

## Tables

API

方法 | 描述
---|---
transpose | 行列转换